![VIVA](https://img.shields.io/github/v/release/Oscar-97/VIVA-Benchmark-Data-Analysis) ![License](https://img.shields.io/badge/License-MIT-brightgreen) ![Languages](https://img.shields.io/github/languages/count/Oscar-97/VIVA-Benchmark-Data-Analysis) ![TypeScript](https://img.shields.io/badge/typescript-%23007ACC.svg?style=flat&logo=typescript&logoColor=white) ![Webpack](https://img.shields.io/badge/webpack-%238DD6F9.svg?style=flat&logo=webpack&logoColor=black) ![Bootstrap](https://img.shields.io/badge/bootstrap-%23563D7C.svg?style=flat&logo=bootstrap&logoColor=white) ![Chart.js](https://img.shields.io/badge/chart.js-F5788D.svg?style=flat&logo=chart.js&logoColor=white)

# VIVA: Visualize, Interact, Verify, and Analyze Benchmarking Data for Optimization Solvers
Building on the concept and implementation of [PAVER 2.0](https://github.com/coin-or/paver), the main goal of this project is to allow end users to interact with their own uploaded benchmark data from mathematical optimization problems and their solvers. The data is presented in a tabular format, with the added ability to visualize specific results through various plots, making it easier to understand and interpret the data. Demo-data is attained from [miplib2010 examples](https://github.com/coin-or/Paver/tree/master/examples/miplib2010).

This project is developed using TypeScript, DataTables.js, Chart.js and Webpack. Bootstrap is used for styling.  Notably, the application can be run without a live server since Webpack is responsible for bundling the files. It is also possible to install it as a Progressive Web Application by launching the project in a live server, navigating to the report page using a compatible browser, and installing it. Support for offline functionality is incldued in the PWA implementation.

<div style="text-align:left;">
  <img src="./Images/OverView_system_new.png" width="100%">
</div>

## TODO:

- Add more ESLint rules for better structuring.
- Expand `UserConfiguration.json` support.
- Upload from different directories.
- Investigate support for trace files generated by Examiner.

## Instructions for using the system
- To get started with the project, either download or clone the repository and open the `report.html` file in a web browser. 
- Click the "Browse" button to upload the results and select either:
    - one or more results file in a `.trc` format.
        - .solu (best known primal and dual bounds for each instance) and .csv (instance properties) can be uploaded in conjugation to get additional information.
    - or a single `UserConfiguration.json` (Which can be created from this application).
- Once you have selected a file, click on upload.
- Click on the View All Results/View Plot button to get a table or plot with the benchmark results, depending on the currently active page.

### Table Page

- On the table page, View Selected Problems filters the table and only shows selected problems.
- Save Data stores the currently uploaded data to local storage, if the above mentioned filtering has been applied, then that currently visible table will be stored.
- The stored data can be downloaded as a `UserConfiguration.json` by clicking on the Download Saved Data button.
- Download Table as CSV downloads the currently visible table in a csv format.
- Delete Data removes all stored data from the local storage.
- Clear Data Table clears the currently visible table.
- The filter options on the table page can be collapsed and expanded.

### Supported Formats

### .trc

The following header structure and order should be used in conjunction with .trc files:

    InputFileName
    ModelType
    SolverName
    NLP
    MIP
    JulianDate
    Direction
    NumberOfEquations
    NumberOfVariables
    NumberOfDiscreteVariables
    NumberOfNonZeros
    NumberOfNonlinearNonZeros
    OptionFile
    ModelStatus
    TermStatus
    ObjectiveValue
    ObjectiveValueEstimate
    SolverTime
    NumberOfIterations
    NumberOfDomainViolations
    NumberOfNodes
    UserComment

For further information, see https://gams.com/latest/docs/UG_SolverUsage.html#UG_SolverUsage_TraceFile.

### .json
The file should include `dataSet` and `dataFileType`, `defaultTime` and `primalGap` are optional.

```json
{
    "dataSet": [
        "alan,MINLP,knitro,CONOPT,CPLEX,43365.479,min,8,9,4,24,3,1,8,Error,2.925,2.925,0.142,0,0,18,#,2.925,2.925,2.925,2.925,0,0,0,0,0",
        "ball_mk2_10,MINLP,knitro,CONOPT,CPLEX,43365.479,min,2,11,10,21,10,1,8,Error,0,2.22044604925031E-16,2.5,0,0,3070,#,0,2.22044604925031e-16,0,2.22044604925031e-16,0,0,0,0,0",
        "ball_mk2_30,MINLP,knitro,CONOPT,CPLEX,43365.479,min,2,31,30,61,30,1,2,Error,0,-26.887733399442,900.034,0,0,42269,#,0,-26.887733399442,0,-26.887733399442,Infinity,Infinity,0,0,0",
        "ball_mk3_10,MINLP,knitro,CONOPT,CPLEX,43365.489,min,2,11,10,21,10,1,13,Error,0,NA,NA,NA,NA,NA,#,0,-Infinity,0,-Infinity,Infinity,Infinity,0,NaN,NaN",
        "ball_mk3_20,MINLP,knitro,CONOPT,CPLEX,43365.49,min,2,21,20,41,20,1,6,Error,-21.6911427569375,-21.6911427569302,900.059,0,0,154017,#,-21.6911427569375,-21.6911427569302,-21.6911427569375,-21.6911427569302,0,0,0,0,0",
        "ball_mk3_30,MINLP,knitro,CONOPT,CPLEX,43365.5,min,2,31,30,61,30,1,6,Error,-32.4338272833906,-32.6214975320104,900.065,0,0,156536,#,-32.4338272833906,-32.6214975320104,-32.4338272833906,-32.6214975320104,0.57863,0.57863,0,0,0",
        "ball_mk4_05,MINLP,knitro,CONOPT,CPLEX,43365.51,min,2,11,10,21,10,1,13,Error,0,NA,NA,NA,NA,NA,#,0,-Infinity,0,-Infinity,Infinity,Infinity,0,NaN,NaN",
        "ball_mk4_10,MINLP,knitro,CONOPT,CPLEX,43365.514,min,2,21,20,41,20,1,6,Error,-14.6650988983745,-14.6650988983711,267.221,0,0,199351,#,-14.6650988983745,-14.6650988983711,-14.6650988983745,-14.6650988983711,0,0,0,0,0",
        "ball_mk4_15,MINLP,knitro,CONOPT,CPLEX,43365.517,min,2,31,30,61,30,1,6,Error,-33.6086573695247,-33.6086573695138,419.96,0,0,199353,#,-33.6086573695247,-33.6086573695138,-33.6086573695247,-33.6086573695138,0,0,0,0,0"
    ],
    "dataFileType": "trc",
    "defaultTime": 900,
    "primalGap": 0.1
}
```

## Working with the Codebase
### 1. Prerequisites

Before getting started, make sure you have the following software installed on your machine:

    Node.js: https://nodejs.org/
    TypeScript: https://www.typescriptlang.org/
    Webpack: https://webpack.js.org/

Install the required packages by running: 
    
    npm install

### 2. Bundling
Navigate to the project directory in your terminal and run:

    npm run build

This runs the command "webpack --config webpack.config.js", which will build the application using webpack'. The created `bundle.js` and `main.css` are located in `Dist/`.

### 3. Other Scripts

Run unit tests using Jest:
    
    npm run test:functions

Run UI tests with Playwright using Jest:

    npm run test:ui

Lint the project files using ESLint:

    npm run lint

To automatically fix linting issues:
    
    npm run lint:fix

Generate documentation using TypeDoc:

    npm run build:docs

Create a slimmed down release build using gulp:

    npm run release

Create a slimmed down web release build using gulp:

    npm run release:web
